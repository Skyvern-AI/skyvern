---
title: File Operations
subtitle: Download, parse, and upload files in workflows
slug: multi-step-automations/file-operations
---

Workflows can download files from websites, parse CSVs/PDFs/Excel files, and upload to cloud storage. This page covers the four file operation blocks.

---

## Downloading files

Add a `file_download` block to save files from a website. This block works like a Navigation block, but completes the moment a file download starts.

**Required:** `navigation_goal`

<CodeGroup>
```json JSON
{
  "block_type": "file_download",
  "label": "download_ein_letter",
  "url": "https://sa.www4.irs.gov/modiein/individual/index.jsp",
  "navigation_goal": "Find and download the EIN confirmation letter PDF. Look for a Download or Print button. COMPLETE when the download starts.",
  "download_suffix": "ein_confirmation.pdf"
}
```

```yaml YAML
- block_type: file_download
  label: download_ein_letter
  url: "https://sa.www4.irs.gov/modiein/individual/index.jsp"
  navigation_goal: |
    Find and download the EIN confirmation letter PDF.
    Look for a Download or Print button.
    COMPLETE when the download starts.
  download_suffix: ein_confirmation.pdf
```
</CodeGroup>

Downloaded files land in `SKYVERN_DOWNLOAD_DIRECTORY`. Reference this in later blocks to upload or email them.

| Parameter | Type | Description |
|-----------|------|-------------|
| `navigation_goal` | string | **Required.** How to find and click the download button |
| `url` | string | Starting page (omit to continue from previous block) |
| `download_suffix` | string | Filename for the downloaded file |
| `download_timeout` | number | Seconds to wait for large files |
| `max_retries` | integer | Retry count on failure |
| `max_steps_per_run` | integer | Max actions the block can take |

### Downloading multiple files

Extract URLs first, then loop:

<CodeGroup>
```json JSON
{
  "block_type": "for_loop",
  "label": "download_all_invoices",
  "loop_over_parameter_key": "get_invoices_output.urls",
  "continue_on_failure": true,
  "loop_blocks": [
    {
      "block_type": "file_download",
      "label": "download_invoice",
      "url": "{{ download_invoice.current_value }}",
      "navigation_goal": "Download the invoice PDF from this page"
    }
  ]
}
```

```yaml YAML
- block_type: for_loop
  label: download_all_invoices
  loop_over_parameter_key: get_invoices_output.urls
  continue_on_failure: true
  loop_blocks:
    - block_type: file_download
      label: download_invoice
      url: "{{ download_invoice.current_value }}"
      navigation_goal: Download the invoice PDF from this page
```
</CodeGroup>

All files accumulate in `SKYVERN_DOWNLOAD_DIRECTORY`.

---

## Parsing files

Add a `file_url_parser` block to extract structured data from CSV, Excel, or PDF files. Parsed output is available to subsequent blocks as `{{ label_output }}`.

**Required:** `file_url`, `file_type`

<CodeGroup>
```json JSON
{
  "block_type": "file_url_parser",
  "label": "parse_resume",
  "file_url": "{{ resume }}",
  "file_type": "pdf",
  "json_schema": {
    "type": "object",
    "properties": {
      "name": { "type": "string" },
      "email": { "type": "string" },
      "work_experience": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "company": { "type": "string" },
            "role": { "type": "string" }
          }
        }
      }
    }
  }
}
```

```yaml YAML
- block_type: file_url_parser
  label: parse_resume
  file_url: "{{ resume }}"
  file_type: pdf
  json_schema:
    type: object
    properties:
      name:
        type: string
      email:
        type: string
      work_experience:
        type: array
        items:
          type: object
          properties:
            company:
              type: string
            role:
              type: string
```
</CodeGroup>

With `json_schema`, an LLM extracts exactly the fields you specify. Without it, you get raw parsed content.

| Parameter | Type | Description |
|-----------|------|-------------|
| `file_url` | string | **Required.** HTTP URL, S3 URI, or parameter (`{{ resume }}`) |
| `file_type` | string | **Required.** `csv`, `excel`, or `pdf` |
| `json_schema` | object | JSON Schema for structured extraction |

**Supported `file_url` sources:**
- HTTP/HTTPS URLs
- S3 URIs (`s3://bucket/path/file.csv`)
- Azure Blob URIs (`azure://container/path/file.xlsx`)
- Google Drive links (auto-converted)
- Workflow parameters (`{{ parameter_name }}`)

### Parse CSV and process each row

<CodeGroup>
```json JSON
[
  {
    "block_type": "file_url_parser",
    "label": "parse_orders",
    "file_url": "{{ orders_csv }}",
    "file_type": "csv"
  },
  {
    "block_type": "for_loop",
    "label": "process_orders",
    "loop_over_parameter_key": "parse_orders_output",
    "loop_blocks": [
      {
        "block_type": "navigation",
        "label": "enter_order",
        "url": "https://erp.example.com/orders/new",
        "navigation_goal": "Create a new order with: {{ enter_order.current_value }}"
      }
    ]
  }
]
```

```yaml YAML
- block_type: file_url_parser
  label: parse_orders
  file_url: "{{ orders_csv }}"
  file_type: csv

- block_type: for_loop
  label: process_orders
  loop_over_parameter_key: parse_orders_output
  loop_blocks:
    - block_type: navigation
      label: enter_order
      url: "https://erp.example.com/orders/new"
      navigation_goal: "Create a new order with: {{ enter_order.current_value }}"
```
</CodeGroup>

CSV parsing returns an array of objects (one per row, column headers as keys). Loop over `parse_orders_output` to process each row.

---

## Saving files

Three blocks for uploading files to cloud storage.

### Upload to Skyvern's S3

Simplest option. Uploads everything from `SKYVERN_DOWNLOAD_DIRECTORY` and returns S3 URIs.

**Required:** `path`

<CodeGroup>
```json JSON
{
  "block_type": "upload_to_s3",
  "label": "save_invoices",
  "path": "SKYVERN_DOWNLOAD_DIRECTORY"
}
```

```yaml YAML
- block_type: upload_to_s3
  label: save_invoices
  path: SKYVERN_DOWNLOAD_DIRECTORY
```
</CodeGroup>

Output is a list of S3 URIs. **Limit:** 25 files max.

### Upload to your own S3/Azure

Use `file_upload` to send files to your own bucket.

**Required:** `storage_type`, `path`, and storage credentials

<CodeGroup>
```json JSON
{
  "block_type": "file_upload",
  "label": "upload_to_company_bucket",
  "storage_type": "s3",
  "s3_bucket": "company-documents",
  "aws_access_key_id": "{{ aws_key }}",
  "aws_secret_access_key": "{{ aws_secret }}",
  "region_name": "us-west-2",
  "path": "SKYVERN_DOWNLOAD_DIRECTORY"
}
```

```yaml YAML
- block_type: file_upload
  label: upload_to_company_bucket
  storage_type: s3
  s3_bucket: company-documents
  aws_access_key_id: "{{ aws_key }}"
  aws_secret_access_key: "{{ aws_secret }}"
  region_name: us-west-2
  path: SKYVERN_DOWNLOAD_DIRECTORY
```
</CodeGroup>

| Parameter | Type | Description |
|-----------|------|-------------|
| `storage_type` | string | **Required.** `s3` or `azure` |
| `path` | string | **Required.** `SKYVERN_DOWNLOAD_DIRECTORY` or specific file |

**S3 params:** `s3_bucket`, `aws_access_key_id`, `aws_secret_access_key`, `region_name`

**Azure params:** `azure_storage_account_name`, `azure_storage_account_key`, `azure_blob_container_name`, `azure_folder_path`

**Limit:** 50 files max.

### Direct URL to S3

Skip the browser entirely. Downloads a file from a URL and saves to Skyvern's S3.

**Required:** `url`

<CodeGroup>
```json JSON
{
  "block_type": "download_to_s3",
  "label": "save_report",
  "url": "https://analytics.example.com/report.pdf"
}
```

```yaml YAML
- block_type: download_to_s3
  label: save_report
  url: "https://analytics.example.com/report.pdf"
```
</CodeGroup>

Faster when you already have the URL. **Limit:** 10 MB max file size.

---

## Passing files between blocks

### Downloaded files

All downloaded files land in `SKYVERN_DOWNLOAD_DIRECTORY`. Reference it in blocks that accept file paths:

<CodeGroup>
```json JSON
{
  "block_type": "send_email",
  "label": "email_documents",
  "sender": "automation@company.com",
  "recipients": ["accounting@company.com"],
  "subject": "Monthly invoices attached",
  "body": "See attached invoices for this month.",
  "smtp_host_secret_parameter_key": "smtp_host",
  "smtp_port_secret_parameter_key": "smtp_port",
  "smtp_username_secret_parameter_key": "smtp_username",
  "smtp_password_secret_parameter_key": "smtp_password",
  "file_attachments": ["SKYVERN_DOWNLOAD_DIRECTORY"]
}
```

```yaml YAML
- block_type: send_email
  label: email_documents
  sender: automation@company.com
  recipients:
    - accounting@company.com
  subject: Monthly invoices attached
  body: See attached invoices for this month.
  smtp_host_secret_parameter_key: smtp_host
  smtp_port_secret_parameter_key: smtp_port
  smtp_username_secret_parameter_key: smtp_username
  smtp_password_secret_parameter_key: smtp_password
  file_attachments:
    - SKYVERN_DOWNLOAD_DIRECTORY
```
</CodeGroup>

### Parsed data

Parsed file output is available as `{{ label_output }}`:

<CodeGroup>
```json JSON
[
  {
    "block_type": "file_url_parser",
    "label": "parse_resume",
    "file_url": "{{ resume }}",
    "file_type": "pdf"
  },
  {
    "block_type": "navigation",
    "label": "fill_application",
    "url": "{{ job_url }}",
    "navigation_goal": "Fill out the application form using this candidate's information:\n\n{{ parse_resume_output }}"
  }
]
```

```yaml YAML
- block_type: file_url_parser
  label: parse_resume
  file_url: "{{ resume }}"
  file_type: pdf

- block_type: navigation
  label: fill_application
  url: "{{ job_url }}"
  navigation_goal: |
    Fill out the application form using this candidate's information:

    {{ parse_resume_output }}
```
</CodeGroup>

### File URL as workflow input

Define a `file_url` parameter to accept files when running the workflow:

<CodeGroup>
```json JSON
{
  "parameters": [
    {
      "key": "resume",
      "parameter_type": "workflow",
      "workflow_parameter_type": "file_url",
      "description": "URL to the applicant's resume"
    }
  ]
}
```

```yaml YAML
parameters:
  - key: resume
    parameter_type: workflow
    workflow_parameter_type: file_url
    description: URL to the applicant's resume
```
</CodeGroup>

Pass any accessible URL: public links, S3 presigned URLs, or files from your own storage.

---

## Next steps

<CardGroup cols={2}>
  <Card
    title="Workflow Blocks Reference"
    icon="cube"
    href="/multi-step-automations/workflow-blocks-reference"
  >
    Complete parameter reference for all blocks
  </Card>
  <Card
    title="Build a Workflow"
    icon="hammer"
    href="/multi-step-automations/build-a-workflow"
  >
    Learn how blocks pass data to each other
  </Card>
</CardGroup>
